# 莫队二次离线

## 莫队二次离线的原理和过程

1. 所谓莫队二次离线，其实是一种较难的莫队题型。
2. 普通莫队过程，很难快速得到答案，那么思考窗口在变化时，如何求解答案的变化量。
3. 预设某些可差分信息（前缀和、后缀和），然后把答案变化量，分解为两个部分依次求出。
4. 执行普通莫队，即第一次离线，得到变化量的第一部分，并且生成第二次离线的查询任务。
5. 执行第二次离线，枚举得到变化量的第二部分，至此答案变化量求解完毕。
6. 普通莫队的顺序下，得到了每个答案的变化量，那么变化量的前缀和，即每个区间问题的答案。
7. 第二次离线的枚举总代价 = 普通莫队滑窗的总距离 = `O(n * √n)` 。
